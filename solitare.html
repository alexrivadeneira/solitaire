<!DOCTYPE html>
<html>
<head>
    <style>

        .board{
            display: flex;
            flex-wrap: wrap;
        }

        .pile{
            display: flex;
            width: 100px;
            margin: 10px;
            flex-direction: column;
        }

        .card{
            height: 165px;
            width: 100px;
            border: 1px solid #000;
            border-radius: 15px;
            margin: 5px;
            background: #fff;
        }

        .card:not(:first-child){
            margin-top: -145px;
        }


    </style>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>

    <div class="board">
        <div class="pile" id="0" ondragover="handleDragOver(this)"></div>
        <div class="pile" id="1" ondragover="handleDragOver(this)"></div>
        <div class="pile" id="2" ondragover="handleDragOver(this)"></div>
        <div class="pile" id="3" ondragover="handleDragOver(this)"></div>
        <div class="pile" id="4" ondragover="handleDragOver(this)"></div>
        <div class="pile" id="5" ondragover="handleDragOver(this)"></div>
        <div class="pile" id="6" ondragover="handleDragOver(this)"></div>


    </div>

<script>
    const suits = ['h', 'd', 's', 'c'];
    const values = [2,3,4,5,6,7,8,9,10,11,12,13,14];

    let piles = [[],[],[],[],[],[],[]];
    let drawPool = [];

    // still need to account for whether or not card is visible



    


    // display the sorted cards

    function init(){
        var boardDOM = document.querySelector('.board');
        const deck = [];

        suits.forEach(suit => {
        values.forEach(value =>{
            deck.push([suit, value]);
        });
    });

        const shuffledDeck = shuffleDeck(deck);
        dealPiles(piles, shuffledDeck);

    }

    function shuffleDeck(deck){
        let unshuffledDeck = [...deck];
        let shuffledDeck = [];
        while(unshuffledDeck.length > 0){
            let randomSelect = Math.floor(Math.random() * unshuffledDeck.length);
            shuffledDeck.push(unshuffledDeck[randomSelect]);
            unshuffledDeck.splice(randomSelect, 1);
        }
        return shuffledDeck;
    }

    // sort the cards into piles - 7 piles, and which is on the top
    function dealPiles(piles, deck){
        piles.forEach(function(pile, index){
            var doTimes = index;
            for(var i = 0; i <= doTimes; i++){
                piles[index].push(deck.pop());
            }
        });
    }

    function drawPiles(piles){
        var pilesDOM = document.querySelectorAll('.pile');
        piles.forEach((pile, index) => {
            pile.forEach(card => {
                pilesDOM[index].innerHTML += 
                `
                        <div class='card' draggable='true'>
                        ${card[0]} ${card[1]}
                        </div>
                `;
            });
        });
    }

    function handleDragOver(e){
        console.log('drag over event');
        console.log("drag over: ", e);
        console.log(e.id)
    }

    // when you interact with a pile:
        // drag a card from one pile to another eligible pile
            // drag a card to an empty pile
        // flip the card that's been exposed

    // drag logic - to simply move card without taking into account values

    // pick up the visible card off a pile
    // drag and hover over new pile
    // get the new pile id
    // update the pile state with the new card
    // redraw the piles

    // displaying the pile
        // after the initial deal, the top card should be exposed

    
    init();
    drawPiles(piles);

    console.log(piles);
    
</script>
</body>
</html>